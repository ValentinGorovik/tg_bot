<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Создание героя</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:sans-serif;padding:1em;max-width:400px;margin:auto;}
    input,select,button{width:100%;padding:0.5em;margin-top:0.5em;font-size:1rem;}
    #status{margin-top:1em;color:green;white-space:pre-line;}
  </style>
</head>
<body>
  <h1>Создание героя</h1>
  <label>Ник:<input id="nick" type="text" placeholder="Введите ник"></label>
  <label>Пол:
    <select id="gender">
      <option value="">—</option>
      <option>Мужской</option>
      <option>Женский</option>
    </select>
  </label>
  <label>Раса:
    <select id="race">
      <option value="">—</option>
      <option>Человек</option>
      <option>Эльф</option>
      <option>Орк</option>
      <option>Гном</option>
    </select>
  </label>
  <button id="send">Отправить</button>
  <div id="status"></div>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram?.WebApp;
    const status = document.getElementById('status');
    if (!tg) {
      status.innerText = "❌ Откройте из Telegram";
      throw "";
    }
    tg.expand();
    status.innerText = "✅ WebApp SDK загружен";

    document.getElementById('send').onclick = () => {
      const payload = {
        nick:   document.getElementById('nick').value,
        gender: document.getElementById('gender').value,
        race:   document.getElementById('race').value
      };
      status.innerText += "\n→ отправляем: " + JSON.stringify(payload);
      tg.sendData(JSON.stringify(payload));
      setTimeout(()=>tg.close(),200);
    };
  </script>
</body>
</html>
